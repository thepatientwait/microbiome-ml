[workspace]
name = "microbiome_ml"
version = "0.1.0"
description = "Python module for standardizing ML applications in microbiome research"
authors = ["Your Research Group <email@institution.edu>"]
channels = ["conda-forge", "pytorch", "nvidia", "bioconda"]
platforms = ["linux-64"]

[dependencies]
python = ">=3.9,<3.12"
# Core dependencies - actually used in wrangle module
numpy = ">=1.21.0"
polars = ">=0.20.0"
requests = ">=2.25.0"
tqdm = ">=4.64.0"
pyyaml = ">=0.2.5"

# CV dependencies - used in cross validation
scikit-learn = ">=1.0.0"
xgboost = ">=1.7.0"

[feature.dev.dependencies]
pytest = ">=7.0.0"
pytest-cov = ">=4.0.0"
pytest-mock = ">=3.10.0"
black = ">=23.0.0"
isort = ">=5.12.0"
flake8 = ">=6.0.0"
flake8-pyproject = ">=1.2.0"
mypy = ">=1.0.0"
pre-commit = ">=3.0.0"
hypothesis = ">=6.0.0"
docformatter = ">=1.7.0"
autoflake = ">=2.0.0"

[feature.docs.dependencies]
mkdocs = ">=1.5.0"
mkdocs-material = ">=9.0.0"
mkdocstrings = { version = ">=0.22.0" }

# [feature.ml.dependencies]
# torch = ">=2.0.0"
# transformers = ">=4.20.0"
# datasets = ">=2.0.0"

# [feature.geo.dependencies]
# # Optional geospatial dependencies for annotation modules
# netcdf4 = ">=1.6.0"
# rasterio = ">=1.3.0"
# cdsapi = ">=0.6.0"
# geopandas = ">=0.13.0"
# pandas = ">=1.5.0"

# [feature.bio.dependencies]
# # Currently unused - placeholder for future bio dependencies
# # biopython = ">=1.80"

[tool.black]
line-length = 79

[tool.isort]
profile = "black"
line_length = 79

[tasks]
lint = "flake8 --extend-ignore=E203,W503,D,E501 --per-file-ignores='**/conftest.py:E501' src/ test/tests/"
format-autoflake = "autoflake --remove-all-unused-imports --remove-unused-variables --in-place --recursive src/ test/tests/"
format-docformatter = "docformatter --in-place --wrap-summaries 79 --wrap-descriptions 79 --recursive src/ test/tests/"
format-isort = "isort src/ test/tests/"  # Reads from pyproject.toml
format-black = "black src/ test/tests/"  # Reads from pyproject.toml
format = { depends-on = ["format-autoflake", "format-docformatter", "format-isort", "format-black"] }
type-check = "mypy"
docs-serve = "mkdocs serve"
docs-build = "mkdocs build"
pre-commit-install = "pre-commit install"
clean = "find . -type d -name __pycache__ -delete && find . -name '*.pyc' -delete"
install-dev = "pip install -e ."
test = { depends-on = ["install-dev"], cmd = "pytest test/tests/" }
local-check = { depends-on = ["lint", "type-check", "test"] }


[environments]
default = ["dev"]
docs = ["dev", "docs"]
full = ["dev", "docs"]
